# Changelog

For more information on the list of deprecated flags and APIs, have a look at
https://docs.docker.com/engine/deprecated/ where you can find the target removal dates

## 18.09.0-ce (2018-MM-DD)

### ---Triage---

* Allow custom pattern when extracting variable…. [docker/cli#1262](https://github.com/docker/cli/pull/1262)
* Allow running `make help` without out-of-container warning. [docker/cli#1247](https://github.com/docker/cli/pull/1247)
* Bash completion: fix uncorrect completion. [docker/cli#1270](https://github.com/docker/cli/pull/1270)
* Block task starting until node attachments are ready. [moby/moby#37604](https://github.com/moby/moby/pull/37604)
* Bump API version to 1.39. [moby/moby#37640](https://github.com/moby/moby/pull/37640)
* Bump a bunch of dependencies to more recent versions. [moby/moby#37522](https://github.com/moby/moby/pull/37522)
* Bump docker and dependencies. [docker/cli#1163](https://github.com/docker/cli/pull/1163)
* Bump gometalinter to v2.0.6. [moby/moby#37436](https://github.com/moby/moby/pull/37436)
* Bump mergo to v0.3.6. [docker/cli#1246](https://github.com/docker/cli/pull/1246)
* Bump mergo to v0.3.6. [moby/moby#37567](https://github.com/moby/moby/pull/37567)
* Bump version to 18.07.0-dev. [docker/cli#1154](https://github.com/docker/cli/pull/1154)
* Bump version to 18.09.0-dev. [docker/cli#1226](https://github.com/docker/cli/pull/1226)
* Client: add WithDialContext() and client.Dialer(). [moby/moby#36630](https://github.com/moby/moby/pull/36630)
* Do not return "<unknown>" in /info response. [moby/moby#37472](https://github.com/moby/moby/pull/37472)
* Don not lose an error message from d.StartWithError in d.Start. [moby/moby#37543](https://github.com/moby/moby/pull/37543)
* Don't invoke HCS shutdown if terminate called; removes unused vars and no-op calls. [moby/moby#37583](https://github.com/moby/moby/pull/37583)
* Global Default Address Pool feature support. [docker/cli#1233](https://github.com/docker/cli/pull/1233)
* Global Default Address Pool feature support. [moby/moby#37558](https://github.com/moby/moby/pull/37558)
* Hack/make.ps1: don't rely on GO_VERSION. [moby/moby#37592](https://github.com/moby/moby/pull/37592)
* Import environment variables that are present. [docker/cli#1019](https://github.com/docker/cli/pull/1019)
* Improve scalability of the Linux load balancing. [moby/moby#37372](https://github.com/moby/moby/pull/37372)
* Improve version output alignment. [docker/cli#1204](https://github.com/docker/cli/pull/1204)
* Libcontainerd: split client and daemon supervision. [moby/moby#37149](https://github.com/moby/moby/pull/37149)
* Migrate `TestExtractVariables` to subtests…. [docker/cli#1277](https://github.com/docker/cli/pull/1277)
* Migrate service update integration tests from integration-cli to integration/service package. [moby/moby#37492](https://github.com/moby/moby/pull/37492)
* Migrate some ipc container test from integration-cli to integration. [moby/moby#37541](https://github.com/moby/moby/pull/37541)
* Migrate some ipcmode tests to integration. [moby/moby#37394](https://github.com/moby/moby/pull/37394)
* Migrate to non-deprecated functions of `api/types/filters`. [docker/cli#1237](https://github.com/docker/cli/pull/1237)
* Mkimage-alpine.sh: Removed the "-i -t" arguments from the smoke test calling printf (the…. [moby/moby#37398](https://github.com/moby/moby/pull/37398)
* Moved integration tests from docker_cli_config_create_test.go to integration/config. [moby/moby#37457](https://github.com/moby/moby/pull/37457)
* Namesgenerator: new adjective, two inspiring Computing Science authors. [moby/moby#37465](https://github.com/moby/moby/pull/37465)
* Pkg/system: return nil explicitly. [moby/moby#37551](https://github.com/moby/moby/pull/37551)
* Pkg/tarsum: fix unit test for Go 1.11+. [moby/moby#37498](https://github.com/moby/moby/pull/37498)
* Refactor daemon.info to reduce cyclomatic complexity. [moby/moby#37451](https://github.com/moby/moby/pull/37451)
* Refactor trust inspect command unit tests. [docker/cli#1280](https://github.com/docker/cli/pull/1280)
* Refactor trust revoke command unit tests. [docker/cli#1283](https://github.com/docker/cli/pull/1283)
* Refactored commands to use sort.Slice. [docker/cli#1196](https://github.com/docker/cli/pull/1196)
* Register OCI media types. [moby/moby#37359](https://github.com/moby/moby/pull/37359)
* Remove now unused multireader.. [moby/moby#37675](https://github.com/moby/moby/pull/37675)
* Remove slash prefix when matching name filters (Fixes #37453). [moby/moby#37462](https://github.com/moby/moby/pull/37462)
* Remove stray uses of "golang.org/x/net/context". [moby/moby#37449](https://github.com/moby/moby/pull/37449)
* Revert "migrated service integration tests from integration-cli/docke…. [moby/moby#37545](https://github.com/moby/moby/pull/37545)
* Sort plugin names in a natural order. [docker/cli#1166](https://github.com/docker/cli/pull/1166)
* Support SSH connection. [docker/cli#1014](https://github.com/docker/cli/pull/1014)
* Swagger: bump API version to v1.39. [moby/moby#37657](https://github.com/moby/moby/pull/37657)
* Systemd-resolved proper handling. [moby/moby#37485](https://github.com/moby/moby/pull/37485)
* Update CircleCI Docker version to 18.03. [docker/cli#1212](https://github.com/docker/cli/pull/1212)
* Update TESTING.md to replace testify by gotest.tools. [docker/cli#1168](https://github.com/docker/cli/pull/1168)
* Update cloudflare/cfssl to 1.3.2. [moby/moby#37390](https://github.com/moby/moby/pull/37390)
* Update containerd vendor to 1.2 beta. [moby/moby#37664](https://github.com/moby/moby/pull/37664)
* Update deploy.go. [docker/cli#1216](https://github.com/docker/cli/pull/1216)
* Update documents of `Detect`. [moby/moby#37380](https://github.com/moby/moby/pull/37380)
* Update documents of `dispatchAdd`. [moby/moby#37379](https://github.com/moby/moby/pull/37379)
* Update fsnotify to v1.4.7. [moby/moby#37392](https://github.com/moby/moby/pull/37392)
* Update gometalinter to v2.0.6, remove nakedret. [docker/cli#1208](https://github.com/docker/cli/pull/1208)
* Update k8s and other deps. [docker/cli#1230](https://github.com/docker/cli/pull/1230)
* Update proxy config if present. [docker/cli#1317](https://github.com/docker/cli/pull/1317)
* Use constant for task runtime value. [moby/moby#37483](https://github.com/moby/moby/pull/37483)
* Use sort.Slice for sorting commands' output. [docker/cli#1194](https://github.com/docker/cli/pull/1194)
* Use warnings provided by daemon. [docker/cli#1225](https://github.com/docker/cli/pull/1225)
* Various formatting fixes / compilation issues caught by Go 1.11. [moby/moby#37437](https://github.com/moby/moby/pull/37437)
* Vendor: bump google/certificate-transparency-go to 1.0.20. [moby/moby#37499](https://github.com/moby/moby/pull/37499)
* Vendor: update continuity to 0377f7d767206. [moby/moby#37445](https://github.com/moby/moby/pull/37445)
* Vendor: update tlsconfig in go-connections to 7395e3f8aa162843a74ed6d48e79627d9792ac55. [docker/cli#1297](https://github.com/docker/cli/pull/1297)
* Vndr go-connections to v0.4.0. [moby/moby#37660](https://github.com/moby/moby/pull/37660)
* Whitelist syscalls linked to CAP_SYS_NICE in default seccomp profile. [moby/moby#37242](https://github.com/moby/moby/pull/37242)
* [18.09] Add support for multiple signing keys. [docker/cli#1312](https://github.com/docker/cli/pull/1312)
* [18.09] Expose product license in info output. [docker/cli#1313](https://github.com/docker/cli/pull/1313)
* [18.09] Fix progress reporting for containerd pulls. [docker/cli#1311](https://github.com/docker/cli/pull/1311)
* [18.09] Fix supervisor healthcheck throttling. [moby/moby#44](https://github.com/moby/moby/pull/44)
* [18.09] backport "fix relabeling local volume source dir". [moby/moby#41](https://github.com/moby/moby/pull/41)
* [18.09] backport: bump Go to 1.10.4. [docker/cli#1323](https://github.com/docker/cli/pull/1323)
* [18.09] backport: bump kube dependency to 1.11.2. [docker/cli#1322](https://github.com/docker/cli/pull/1322)
* [18.09] backport: fix regression when filtering container names using a leading slash. [moby/moby#37](https://github.com/moby/moby/pull/37)
* [18.09] backport: update docs with the new features option in daemon.json. [docker/cli#1310](https://github.com/docker/cli/pull/1310)
* [18.09] client: dial tls on Dialer if tls config is set. [moby/moby#43](https://github.com/moby/moby/pull/43)
* [18.09] vndr docker/docker to docker/engine d2ecc7b. [docker/cli#1339](https://github.com/docker/cli/pull/1339)
+ Add "Warnings" to /info endpoint, and move detection to the daemon. [moby/moby#37502](https://github.com/moby/moby/pull/37502)
+ Add API-version anotation for --data-path-addr. [docker/cli#1240](https://github.com/docker/cli/pull/1240)
+ Add CLI support for running dockerd in a container on containerd. [docker/cli#1260](https://github.com/docker/cli/pull/1260)
+ Add `help` and remove `watch` targets in docker.Makefile. [docker/cli#1248](https://github.com/docker/cli/pull/1248)
+ Add configuration option for cri-containerd. [moby/moby#37519](https://github.com/moby/moby/pull/37519)
+ Add in two new names for names-generator. [moby/moby#37443](https://github.com/moby/moby/pull/37443)
+ Add vim-plug setting. [moby/moby#37388](https://github.com/moby/moby/pull/37388)
+ Add warning if REST API is accessible through an insecure connection. [moby/moby#37684](https://github.com/moby/moby/pull/37684)
+ Added "--no-cache" to apk call to reduce alpine base image by 10-12% …. [moby/moby#37393](https://github.com/moby/moby/pull/37393)
+ Added events filter scope for bash and zsh completion. [docker/cli#1227](https://github.com/docker/cli/pull/1227)
+ Added unit tests covering content trust for plugin install command. [docker/cli#1149](https://github.com/docker/cli/pull/1149)
+ Added unit tests to cover plugin list command. [docker/cli#1155](https://github.com/docker/cli/pull/1155)
+ Adds a few more names to the name generator.. [moby/moby#37157](https://github.com/moby/moby/pull/37157)
- Fix #28814: use emulation for ConEmu and ConsoleZ. [moby/moby#37600](https://github.com/moby/moby/pull/37600)
- Fix 'trust inspect' typo: "AdminstrativeKeys". [docker/cli#1300](https://github.com/docker/cli/pull/1300)
- Fix Format example typo". [docker/cli#1171](https://github.com/docker/cli/pull/1171)
- Fix checkpoint's exiting semantics.. [moby/moby#37360](https://github.com/moby/moby/pull/37360)
- Fix golint warning on generated "volume" types. [moby/moby#37454](https://github.com/moby/moby/pull/37454)
- Fix mapping a range of host ports to a single container port. [docker/cli#1102](https://github.com/docker/cli/pull/1102)
- Fix some golint and ineffassign issues. [moby/moby#37422](https://github.com/moby/moby/pull/37422)
- Fix the race condition in the integration test TestRunContainerWithBridgeNone. [moby/moby#37438](https://github.com/moby/moby/pull/37438)
- Fix the several typos detected by github.com/client9/misspell. [moby/moby#37609](https://github.com/moby/moby/pull/37609)
- Fix typo on test.md. [moby/moby#37415](https://github.com/moby/moby/pull/37415)
- Fix: Warning Message and Fallback search. [docker/cli#1140](https://github.com/docker/cli/pull/1140)
- Fixed typo breaking zsh docker update autocomplete (closes #1231). [docker/cli#1232](https://github.com/docker/cli/pull/1232)
- Fixed wrong apostrophe character. [docker/cli#1258](https://github.com/docker/cli/pull/1258)

### Builder

* -buildmode=pie is not supported on Linux on MIPS either. [moby/moby#37489](https://github.com/moby/moby/pull/37489)
* Build --secret with buildkit. [docker/cli#1288](https://github.com/docker/cli/pull/1288)
* Build: Remove API requirement for --progress as it is CLI only. [docker/cli#1296](https://github.com/docker/cli/pull/1296)
* Build: add -buildmode=pie. [docker/cli#1242](https://github.com/docker/cli/pull/1242)
* Build: change --console=[auto,false,true] to --progress=[auto,plain,tty]. [docker/cli#1276](https://github.com/docker/cli/pull/1276)
* Builder: Implement `builder prune` to prune build cache. [docker/cli#1295](https://github.com/docker/cli/pull/1295)
* Builder: do not cancel buildkit status request. [moby/moby#37597](https://github.com/moby/moby/pull/37597)
* Builder: implement PullParent option with buildkit. [moby/moby#37613](https://github.com/moby/moby/pull/37613)
* Buildkit: enable net modes and bridge. [moby/moby#37620](https://github.com/moby/moby/pull/37620)
* Import TestBuildIidFileSquash from moby to cli. [docker/cli#990](https://github.com/docker/cli/pull/990)
* Re-add support for a custom .bashrc file in build env. [moby/moby#37370](https://github.com/moby/moby/pull/37370)
* Remove "experimental" annotations for buildkit. [docker/cli#1303](https://github.com/docker/cli/pull/1303)
* Remove experimental guard for buildkit. [moby/moby#37686](https://github.com/moby/moby/pull/37686)
* Set BuildKit's ExportedProduct variable to show useful errors in the future. [moby/moby#37439](https://github.com/moby/moby/pull/37439)
* Vendor: update buildkit to 9acf51e491. [moby/moby#37385](https://github.com/moby/moby/pull/37385)
* Vndr buildkit, containerd, console. [docker/cli#1302](https://github.com/docker/cli/pull/1302)
* Vndr containerd to a88b631, buildkit to e57eed4, and fsutil to b19464c. [moby/moby#37582](https://github.com/moby/moby/pull/37582)
* [18.09] Buildkit cherry-picks. [moby/moby#42](https://github.com/moby/moby/pull/42)
* [18.09] build: add options to builder prune. [docker/cli#1334](https://github.com/docker/cli/pull/1334)
* [enhancement] add optional fields in daemon.json to enable buildkit. [moby/moby#37593](https://github.com/moby/moby/pull/37593)
* [enhancement] enable buildkit from daemon side. [docker/cli#1275](https://github.com/docker/cli/pull/1275)
+ Add osusergo build tar for static binaries. [moby/moby#37500](https://github.com/moby/moby/pull/37500)

### Client

* Exposes compose `loader.Transform` function…. [docker/cli#1244](https://github.com/docker/cli/pull/1244)
* Extract StackConverter from the StackClient. [docker/cli#1152](https://github.com/docker/cli/pull/1152)
* Refactor stack ps tests. [docker/cli#1284](https://github.com/docker/cli/pull/1284)
* Remove composefiles length check on k8s RunDeploy. [docker/cli#1172](https://github.com/docker/cli/pull/1172)
+ Add a doc.go file so the compose/schema/data directory can be vendore…. [docker/cli#1169](https://github.com/docker/cli/pull/1169)
+ Add a new `ExtractVariables` function to `compose/template` package. [docker/cli#1249](https://github.com/docker/cli/pull/1249)
+ Add missing fields in compose/types. [docker/cli#1235](https://github.com/docker/cli/pull/1235)
+ Add omitempty on compose config top-level types. [docker/cli#1170](https://github.com/docker/cli/pull/1170)

### Logging

* Integration-cli: error logging improvements. [moby/moby#37635](https://github.com/moby/moby/pull/37635)
* Integration: fix log message. [moby/moby#37542](https://github.com/moby/moby/pull/37542)
* Loggerutils: fix a typo. [moby/moby#37570](https://github.com/moby/moby/pull/37570)
* Pass endpoint to the CloudWatch Logs logging driver. [moby/moby#37374](https://github.com/moby/moby/pull/37374)
* Pass log-level to containerd. [moby/moby#37419](https://github.com/moby/moby/pull/37419)
+ Add "local" log driver. [moby/moby#37092](https://github.com/moby/moby/pull/37092)
- Fix logic when enabling buildkit. [moby/moby#37688](https://github.com/moby/moby/pull/37688)

### Networking

* Builder: temporarily disable bridge networking when using buildkit. [moby/moby#37691](https://github.com/moby/moby/pull/37691)
* Move network conversions out of API router. [moby/moby#37156](https://github.com/moby/moby/pull/37156)
* Use sortorder library for sorting network list output. [docker/cli#1266](https://github.com/docker/cli/pull/1266)
* [18.09] builder: fix bridge networking when using buildkit. [moby/moby#35](https://github.com/moby/moby/pull/35)
+ Add unit test to cover network list sort, refactor to table-driven tests. [docker/cli#1259](https://github.com/docker/cli/pull/1259)
- Fix faulty error type checking in removeNetwork(). [moby/moby#37409](https://github.com/moby/moby/pull/37409)

### Runtime

* Disable TestExecWindowsOpenHandles on RS5 temporarily. [moby/moby#37679](https://github.com/moby/moby/pull/37679)
* LCOW: Ensure platform is populated on COPY/ADD. [moby/moby#37563](https://github.com/moby/moby/pull/37563)
* LCOW: Mount to short container paths to avoid command-line length limit. [moby/moby#37659](https://github.com/moby/moby/pull/37659)
* LCOW: lazycontext: Use correct lstat, fix archive check. [moby/moby#37356](https://github.com/moby/moby/pull/37356)
* Lcow: fix debug in startServiceVMIfNotRunning(). [moby/moby#37446](https://github.com/moby/moby/pull/37446)
* Revendor Microsoft/opengcs @ v0.3.8. [moby/moby#37515](https://github.com/moby/moby/pull/37515)
* Select polling based watcher for docker log file watcher on Windows. [moby/moby#37412](https://github.com/moby/moby/pull/37412)
* Temporarily disable failing tests on Windows RS3. [moby/moby#37573](https://github.com/moby/moby/pull/37573)
* Updated the go-winio library to release 0.4.8 that has the fix for Windows Container. [docker/cli#1157](https://github.com/docker/cli/pull/1157)
+ Add --chown flag support for ADD/COPY commands for Windows. [moby/moby#35521](https://github.com/moby/moby/pull/35521)
+ Adds LinuxMetadata support by default on Windows. [moby/moby#37514](https://github.com/moby/moby/pull/37514)

### Swarm Mode

* Propagate the provided external CA certificate to the external CA object in swarm. [docker/cli#1178](https://github.com/docker/cli/pull/1178)
+ Add unit test for swarm labels on containers. [moby/moby#37636](https://github.com/moby/moby/pull/37636)
